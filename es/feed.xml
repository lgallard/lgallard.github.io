<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="es"><generator uri="https://jekyllrb.com/" version="3.6.0">Jekyll</generator><link href="https://lgallardo.com/es/feed.xml" rel="self" type="application/atom+xml" /><link href="https://lgallardo.com/es/" rel="alternate" type="text/html" hreflang="es" /><updated>2019-11-22T23:24:29-06:00</updated><id>https://lgallardo.com/es/</id><title type="html">lgallardo.com</title><subtitle></subtitle><author><name>Luis M. Gallardo D.</name></author><entry><title type="html">Terraform module for Amazon Cognito User Pools</title><link href="https://lgallardo.com/es/2019/11/23/terraform-module-for-amazon-cognito-user-pool" rel="alternate" type="text/html" title="Terraform module for Amazon Cognito User Pools" /><published>2019-11-22T18:00:00-06:00</published><updated>2019-11-22T18:00:00-06:00</updated><id>https://lgallardo.com/es/2019/11/23/terraform-module-for-amazon-cognito-user-pool</id><content type="html" xml:base="https://lgallardo.com/es/2019/11/23/terraform-module-for-amazon-cognito-user-pool">&lt;center&gt;&lt;img src=&quot;/images/terraform-aws-cognito-user-pool.jpg&quot; alt=&quot;terraform-aws-cognito-user-pool&quot; /&gt;&lt;/center&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Les comparto otro módulo Terraform que acabo de publicar como código abierto, el cual permite crear Cognito User Pools con sus atributos, asómo recursos tales como &lt;strong&gt;app clients&lt;/strong&gt;, &lt;strong&gt;domain&lt;/strong&gt; y &lt;strong&gt;resource server&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Puedes verificar el módulo &lt;strong&gt;terraform-aws-cognito-user-pool&lt;/strong&gt; en el &lt;a href=&quot;https://registry.terraform.io/modules/lgallard/cognito-user-pool/aws/&quot; target=&quot;_blank&quot;&gt;Terraform Registry&lt;/a&gt; o clonarlo de &lt;a href=&quot;hhttps://github.com/lgallard/terraform-aws-cognito-user-pool&quot; target=&quot;_blank&quot;&gt;github&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Si quieres echar un vistazo al módulo, también dejé el archivo README en esta publicación:&lt;/p&gt;

&lt;h1 id=&quot;terraform-aws-cognito-user-pool&quot;&gt;terraform-aws-cognito-user-pool&lt;/h1&gt;

&lt;p&gt;Terraform module to create &lt;a href=&quot;https://aws.amazon.com/cognito/&quot;&gt;Amazon Cognito User Pools&lt;/a&gt;, configure its attributes and resources such as  &lt;strong&gt;app clients&lt;/strong&gt;, &lt;strong&gt;domain&lt;/strong&gt;, &lt;strong&gt;resource servers&lt;/strong&gt;. Amazon Cognito User Pools provide a secure user directory that scales to hundreds of millions of users. As a fully managed service, User Pools are easy to set up without any worries about standing up server infrastructure.&lt;/p&gt;

&lt;h2 id=&quot;usage&quot;&gt;Usage&lt;/h2&gt;

&lt;p&gt;You can use this module to create a Cognito User Pool using the default values or use the detailed definition to set every aspect of the Cognito User Pool&lt;/p&gt;

&lt;p&gt;Check the &lt;a href=&quot;examples/&quot;&gt;examples&lt;/a&gt; where you can see the &lt;strong&gt;simple&lt;/strong&gt; example using the default values, the &lt;strong&gt;simple_extended&lt;/strong&gt; version which adds  &lt;strong&gt;app clients&lt;/strong&gt;, &lt;strong&gt;domain&lt;/strong&gt;, &lt;strong&gt;resource servers&lt;/strong&gt; resources, or the &lt;strong&gt;complete&lt;/strong&gt; version with a detailed example.&lt;/p&gt;

&lt;h3 id=&quot;example-simple&quot;&gt;Example (simple)&lt;/h3&gt;

&lt;p&gt;This simple example creates a AWS Cognito User Pool with the default values:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;module &quot;aws_cognito_user_pool_simple&quot; {

  source = &quot;../modules/terraform-aws-cognito-user-pool&quot;

  user_pool_name = &quot;mypool&quot;

  tags = {
    Owner       = &quot;infra&quot;
    Environment = &quot;production&quot;
    Terraform   = true
  }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;example-complete&quot;&gt;Example (complete)&lt;/h3&gt;

&lt;p&gt;This more complete example creates a AWS Cognito User Pool using a detailed configuration. Please check the example folder to get the example with all options:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;module &quot;aws_cognito_user_pool_complete&quot; {

  source = &quot;../modules/terraform-aws-cognito-user-pool&quot;

  user_pool_name           = &quot;mypool&quot;
  alias_attributes         = [&quot;email&quot;, &quot;phone_number&quot;]
  auto_verified_attributes = [&quot;email&quot;]

  admin_create_user_config = {
    unused_account_validity_days = 9
    email_subject                = &quot;Here, your verification code baby&quot;
  }

  email_configuration = {
    email_sending_account  = &quot;DEVELOPER&quot;
    reply_to_email_address = &quot;email@example.com&quot;
    source_arn             = &quot;arn:aws:ses:us-east-1:888888888888:identity/example.com&quot;
  }

  password_policy = {
    minimum_length    = 10
    require_lowercase = false
    require_numbers   = true
    require_symbols   = true
    require_uppercase = true
  }

  schemas = [
    {
      attribute_data_type      = &quot;Boolean&quot;
      developer_only_attribute = false
      mutable                  = true
      name                     = &quot;available&quot;
      required                 = false
    },
    {
      attribute_data_type      = &quot;Boolean&quot;
      developer_only_attribute = true
      mutable                  = true
      name                     = &quot;registered&quot;
      required                 = false
    }
  ]

  string_schemas = [
    {
      attribute_data_type      = &quot;String&quot;
      developer_only_attribute = false
      mutable                  = false
      name                     = &quot;email&quot;
      required                 = true

      string_attribute_constraints = {
        min_length = 7
        max_length = 15
      }
    }
  ]

  tags = {
    Owner       = &quot;infra&quot;
    Environment = &quot;production&quot;
    Terraform   = true
  }

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;inputs&quot;&gt;Inputs&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Name&lt;/th&gt;
      &lt;th&gt;Description&lt;/th&gt;
      &lt;th&gt;Type&lt;/th&gt;
      &lt;th&gt;Default&lt;/th&gt;
      &lt;th&gt;Required&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;admin_create_user_config&lt;/td&gt;
      &lt;td&gt;The configuration for AdminCreateUser requests&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;map&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;{}&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;admin_create_user_config_allow_admin_create_user_only&lt;/td&gt;
      &lt;td&gt;Set to True if only the administrator is allowed to create user profiles. Set to False if users can sign themselves up via an app&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;bool&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;true&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;admin_create_user_config_email_message&lt;/td&gt;
      &lt;td&gt;The message template for email messages. Must contain &lt;code class=&quot;highlighter-rouge&quot;&gt;{username}&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;{####}&lt;/code&gt; placeholders, for username and temporary password, respectively&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;{username}, your verification code is &lt;/code&gt;{####}&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;admin_create_user_config_email_subject&lt;/td&gt;
      &lt;td&gt;The subject line for email messages&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;Your verification code&quot;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;admin_create_user_config_sms_message&lt;/td&gt;
      &lt;td&gt;- The message template for SMS messages. Must contain &lt;code class=&quot;highlighter-rouge&quot;&gt;{username}&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;{####}&lt;/code&gt; placeholders, for username and temporary password, respectively&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;Your username is {username} and temporary password is &lt;/code&gt;{####}&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;admin_create_user_config_unused_account_validity_days&lt;/td&gt;
      &lt;td&gt;The user account expiration limit, in days, after which the account is no longer usable&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;number&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;7&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;alias_attributes&lt;/td&gt;
      &lt;td&gt;Attributes supported as an alias for this user pool. Possible values: phone_number, email, or preferred_username. Conflicts with &lt;code class=&quot;highlighter-rouge&quot;&gt;username_attributes&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;list&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;auto_verified_attributes&lt;/td&gt;
      &lt;td&gt;The attributes to be auto-verified. Possible values: email, phone_number&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;list&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;[]&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;client_allowed_oauth_flows&lt;/td&gt;
      &lt;td&gt;The name of the application client&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;list&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;[]&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;client_allowed_oauth_flows_user_pool_client&lt;/td&gt;
      &lt;td&gt;Whether the client is allowed to follow the OAuth protocol when interacting with Cognito user pools&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;bool&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;true&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;client_allowed_oauth_scopes&lt;/td&gt;
      &lt;td&gt;List of allowed OAuth scopes (phone, email, openid, profile, and aws.cognito.signin.user.admin)&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;list&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;[]&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;client_callback_urls&lt;/td&gt;
      &lt;td&gt;List of allowed callback URLs for the identity providers&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;list&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;[]&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;client_default_redirect_uri&lt;/td&gt;
      &lt;td&gt;The default redirect URI. Must be in the list of callback URLs&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;&quot;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;client_explicit_auth_flows&lt;/td&gt;
      &lt;td&gt;List of authentication flows (ADMIN_NO_SRP_AUTH, CUSTOM_AUTH_FLOW_ONLY, USER_PASSWORD_AUTH)&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;list&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;[]&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;client_generate_secret&lt;/td&gt;
      &lt;td&gt;Should an application secret be generated&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;bool&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;true&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;client_logout_urls&lt;/td&gt;
      &lt;td&gt;List of allowed logout URLs for the identity providers&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;list&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;[]&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;client_name&lt;/td&gt;
      &lt;td&gt;The name of the application client&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;client_read_attributes&lt;/td&gt;
      &lt;td&gt;List of user pool attributes the application client can read from&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;list&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;[]&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;client_refresh_token_validity&lt;/td&gt;
      &lt;td&gt;The time limit in days refresh tokens are valid for&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;number&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;30&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;client_supported_identity_providers&lt;/td&gt;
      &lt;td&gt;List of provider names for the identity providers that are supported on this client&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;list&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;[]&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;client_write_attributes&lt;/td&gt;
      &lt;td&gt;List of user pool attributes the application client can write to&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;list&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;[]&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;clients&lt;/td&gt;
      &lt;td&gt;A container with the clients definitions&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;list&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;[]&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;device_configuration&lt;/td&gt;
      &lt;td&gt;The configuration for the user pool’s device tracking&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;map&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;{}&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;device_configuration_challenge_required_on_new_device&lt;/td&gt;
      &lt;td&gt;Indicates whether a challenge is required on a new device. Only applicable to a new device&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;bool&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;false&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;device_configuration_device_only_remembered_on_user_prompt&lt;/td&gt;
      &lt;td&gt;If true, a device is only remembered on user prompt&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;bool&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;false&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;domain&lt;/td&gt;
      &lt;td&gt;Cognito User Pool domain&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;domain_certificate_arn&lt;/td&gt;
      &lt;td&gt;The ARN of an ISSUED ACM certificate in us-east-1 for a custom domain&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;email_configuration&lt;/td&gt;
      &lt;td&gt;The Email Configuration&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;map&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;{}&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;email_configuration_email_sending_account&lt;/td&gt;
      &lt;td&gt;Instruct Cognito to either use its built-in functional or Amazon SES to send out emails. Allowed values: &lt;code class=&quot;highlighter-rouge&quot;&gt;COGNITO_DEFAULT&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;DEVELOPER&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;COGNITO_DEFAULT&quot;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;email_configuration_reply_to_email_address&lt;/td&gt;
      &lt;td&gt;The REPLY-TO email address&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;&quot;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;email_configuration_source_arn&lt;/td&gt;
      &lt;td&gt;The ARN of the email source&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;&quot;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;email_verification_message&lt;/td&gt;
      &lt;td&gt;A string representing the email verification message&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;email_verification_subject&lt;/td&gt;
      &lt;td&gt;A string representing the email verification subject&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;lambda_config&lt;/td&gt;
      &lt;td&gt;A container for the AWS Lambda triggers associated with the user pool&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;map&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;lambda_config_create_auth_challenge&lt;/td&gt;
      &lt;td&gt;The ARN of the lambda creating an authentication challenge.&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;&quot;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;lambda_config_custom_message&lt;/td&gt;
      &lt;td&gt;A custom Message AWS Lambda trigger.&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;&quot;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;lambda_config_define_auth_challenge&lt;/td&gt;
      &lt;td&gt;Defines the authentication challenge.&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;&quot;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;lambda_config_post_authentication&lt;/td&gt;
      &lt;td&gt;A post-authentication AWS Lambda trigger&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;&quot;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;lambda_config_post_confirmation&lt;/td&gt;
      &lt;td&gt;A post-confirmation AWS Lambda trigger&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;&quot;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;lambda_config_pre_authentication&lt;/td&gt;
      &lt;td&gt;A pre-authentication AWS Lambda trigger&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;&quot;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;lambda_config_pre_sign_up&lt;/td&gt;
      &lt;td&gt;A pre-registration AWS Lambda trigger&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;&quot;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;lambda_config_pre_token_generation&lt;/td&gt;
      &lt;td&gt;Allow to customize identity token claims before token generation&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;&quot;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;lambda_config_user_migration&lt;/td&gt;
      &lt;td&gt;The user migration Lambda config type&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;&quot;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;lambda_config_verify_auth_challenge_response&lt;/td&gt;
      &lt;td&gt;Verifies the authentication challenge response&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;&quot;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;mfa_configuration&lt;/td&gt;
      &lt;td&gt;Set to enable multi-factor authentication. Must be one of the following values (ON, OFF, OPTIONAL)&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;OFF&quot;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;number_schemas&lt;/td&gt;
      &lt;td&gt;A container with the number schema attributes of a user pool. Maximum of 50 attributes&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;list&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;[]&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;password_policy&lt;/td&gt;
      &lt;td&gt;A container for information about the user pool password policy&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;hcl object({ minimum_length = number, require_lowercase = bool, require_lowercase = bool, require_numbers = bool, require_symbols = bool, require_uppercase = bool })&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;password_policy_minimum_length&lt;/td&gt;
      &lt;td&gt;The minimum length of the password policy that you have set&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;number&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;8&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;password_policy_require_lowercase&lt;/td&gt;
      &lt;td&gt;Whether you have required users to use at least one lowercase letter in their password&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;bool&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;true&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;password_policy_require_numbers&lt;/td&gt;
      &lt;td&gt;Whether you have required users to use at least one number in their password&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;bool&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;true&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;password_policy_require_symbols&lt;/td&gt;
      &lt;td&gt;Whether you have required users to use at least one symbol in their password&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;bool&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;true&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;password_policy_require_uppercase&lt;/td&gt;
      &lt;td&gt;Whether you have required users to use at least one uppercase letter in their password&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;bool&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;true&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;resource_server_identifier&lt;/td&gt;
      &lt;td&gt;An identifier for the resource server&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;resource_server_name&lt;/td&gt;
      &lt;td&gt;A name for the resource server&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;resource_server_scope_description&lt;/td&gt;
      &lt;td&gt;The scope description&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;resource_server_scope_name&lt;/td&gt;
      &lt;td&gt;The scope name&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;resource_servers&lt;/td&gt;
      &lt;td&gt;A container with the user_groups definitions&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;list&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;[]&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;schemas&lt;/td&gt;
      &lt;td&gt;A container with the schema attributes of a user pool. Maximum of 50 attributes&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;list&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;[]&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;sms_authentication_message&lt;/td&gt;
      &lt;td&gt;A string representing the SMS authentication message&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;sms_configuration&lt;/td&gt;
      &lt;td&gt;The SMS Configuration&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;map&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;{}&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;sms_configuration_external_id&lt;/td&gt;
      &lt;td&gt;The external ID used in IAM role trust relationships&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;&quot;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;sms_configuration_sns_caller_arn&lt;/td&gt;
      &lt;td&gt;The ARN of the Amazon SNS caller. This is usually the IAM role that you’ve given Cognito permission to assume&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;&quot;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;sms_verification_message&lt;/td&gt;
      &lt;td&gt;A string representing the SMS verification message&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;string_schemas&lt;/td&gt;
      &lt;td&gt;A container with the string schema attributes of a user pool. Maximum of 50 attributes&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;list&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;[]&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;tags&lt;/td&gt;
      &lt;td&gt;A mapping of tags to assign to the User Pool&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;map(string)&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;{}&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;user_group_description&lt;/td&gt;
      &lt;td&gt;The description of the user group&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;user_group_name&lt;/td&gt;
      &lt;td&gt;The name of the user group&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;user_group_precedence&lt;/td&gt;
      &lt;td&gt;The precedence of the user group&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;number&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;user_group_role_arn&lt;/td&gt;
      &lt;td&gt;The ARN of the IAM role to be associated with the user group&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;user_groups&lt;/td&gt;
      &lt;td&gt;A container with the user_groups definitions&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;list&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;[]&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;user_pool_add_ons&lt;/td&gt;
      &lt;td&gt;Configuration block for user pool add-ons to enable user pool advanced security mode features&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;map&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;{}&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;user_pool_add_ons_advanced_security_mode&lt;/td&gt;
      &lt;td&gt;The mode for advanced security, must be one of &lt;code class=&quot;highlighter-rouge&quot;&gt;OFF&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;AUDIT&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;ENFORCED&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;user_pool_name&lt;/td&gt;
      &lt;td&gt;The name of the user pool&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;username_attributes&lt;/td&gt;
      &lt;td&gt;Specifies whether email addresses or phone numbers can be specified as usernames when a user signs up. Conflicts with &lt;code class=&quot;highlighter-rouge&quot;&gt;alias_attributes&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;list&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;verification_message_template&lt;/td&gt;
      &lt;td&gt;The verification message templates configuration&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;map&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;{}&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;verification_message_template_default_email_option&lt;/td&gt;
      &lt;td&gt;The default email option. Must be either &lt;code class=&quot;highlighter-rouge&quot;&gt;CONFIRM_WITH_CODE&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;CONFIRM_WITH_LINK&lt;/code&gt;. Defaults to &lt;code class=&quot;highlighter-rouge&quot;&gt;CONFIRM_WITH_CODE&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;verification_message_template_email_message_by_link&lt;/td&gt;
      &lt;td&gt;The email message template for sending a confirmation link to the user, it must contain the &lt;code class=&quot;highlighter-rouge&quot;&gt;{##Click Here##}&lt;/code&gt; placeholder&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;verification_message_template_email_subject_by_link&lt;/td&gt;
      &lt;td&gt;The subject line for the email message template for sending a confirmation link to the user&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;outputs&quot;&gt;Outputs&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Name&lt;/th&gt;
      &lt;th&gt;Description&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;arn&lt;/td&gt;
      &lt;td&gt;The ARN of the user pool&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;client_ids&lt;/td&gt;
      &lt;td&gt;The ids of the user pool clients&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;client_secrets&lt;/td&gt;
      &lt;td&gt;The client secrets of the user pool clients&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;creation_date&lt;/td&gt;
      &lt;td&gt;The date the user pool was created&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;domain_app_version&lt;/td&gt;
      &lt;td&gt;The app version&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;domain_aws_account_id&lt;/td&gt;
      &lt;td&gt;The AWS account ID for the user pool owner&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;domain_cloudfront_distribution_arn&lt;/td&gt;
      &lt;td&gt;The ARN of the CloudFront distribution&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;domain_s3_bucket&lt;/td&gt;
      &lt;td&gt;The S3 bucket where the static files for this domain are stored&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;endpoint&lt;/td&gt;
      &lt;td&gt;The endpoint name of the user pool. Example format: cognito-idp.REGION.amazonaws.com/xxxx_yyyyy&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;id&lt;/td&gt;
      &lt;td&gt;The id of the user pool&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;last_modified_date&lt;/td&gt;
      &lt;td&gt;The date the user pool was last modified&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;resource_servers_scope_identifiers&lt;/td&gt;
      &lt;td&gt;A list of all scopes configured in the format identifier/scope_name&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;know-issue&quot;&gt;Know issue&lt;/h2&gt;
&lt;p&gt;###removing all lambda triggers&lt;/p&gt;

&lt;p&gt;If you define lambda triggers using the &lt;code class=&quot;highlighter-rouge&quot;&gt;lambda_config&lt;/code&gt; block or any &lt;code class=&quot;highlighter-rouge&quot;&gt;lambda_config_*&lt;/code&gt; variable and you want to remove all triggers, define the lambda_config block with an empty map &lt;code class=&quot;highlighter-rouge&quot;&gt;{}&lt;/code&gt; and apply the plan. Then comment the &lt;code class=&quot;highlighter-rouge&quot;&gt;lambda_config&lt;/code&gt; block or define it as &lt;code class=&quot;highlighter-rouge&quot;&gt;null&lt;/code&gt; and apply the plan again.&lt;/p&gt;

&lt;p&gt;This is needed because all paramters for the &lt;code class=&quot;highlighter-rouge&quot;&gt;lambda_config&lt;/code&gt; block are optional and keeping all block attributes empty or null forces to create a &lt;code class=&quot;highlighter-rouge&quot;&gt;lambda_config {}&lt;/code&gt; block very time a plan/apply is run.&lt;/p&gt;

&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/lgallard/terraform-aws-cognito-user-pool&quot; target=&quot;_blank&quot;&gt;terraform-aws-cognito-user-pool module at github&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;hhttps://registry.terraform.io/modules/lgallard/cognito-user-pool/aws/&quot; target=&quot;_blank&quot;&gt;terraform-aws-cognito-user-pool at Terraform registry&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>Luis Gallardo</name></author><category term="AWS" /><category term="Terraform" /><summary type="html"></summary></entry><entry><title type="html">Terraform module for Amazon Elasticsearch Service</title><link href="https://lgallardo.com/es/2019/10/28/terraform-module-for-amazon-elasticsearch" rel="alternate" type="text/html" title="Terraform module for Amazon Elasticsearch Service" /><published>2019-10-27T19:00:00-05:00</published><updated>2019-10-27T19:00:00-05:00</updated><id>https://lgallardo.com/es/2019/10/28/terraform-module-for-amazon-elasticsearch</id><content type="html" xml:base="https://lgallardo.com/es/2019/10/28/terraform-module-for-amazon-elasticsearch">&lt;center&gt;&lt;img src=&quot;/images/terraform-aws-elasticsearch.jpg&quot; alt=&quot;terraform-aws-elasticsearch&quot; /&gt;&lt;/center&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Dejo por acá otro módulo de Terraform que acabo de publicar como código abierto, el cual permite crear clusters de Amazon Elasticsearch Service. El módulo está diseñado siguiendo las mejores prácticas y los principios del Well-Architected Framework de AWS.&lt;/p&gt;

&lt;p&gt;Puedes verificar el módulo &lt;strong&gt;terraform-aws-elasticsearch&lt;/strong&gt; en el &lt;a href=&quot;https://registry.terraform.io/modules/lgallard/elasticsearch/aws/0.1.0&quot; target=&quot;_blank&quot;&gt;Terraform Registry&lt;/a&gt; o clonarlo de &lt;a href=&quot;https://github.com/lgallard/terraform-aws-elasticsearch&quot; target=&quot;_blank&quot;&gt;github&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Si quieres echar un vistazo al módulo, también dejé el archivo README en esta publicación:&lt;/p&gt;

&lt;h1 id=&quot;terraform-aws-elasticsearch&quot;&gt;terraform-aws-elasticsearch&lt;/h1&gt;

&lt;p&gt;Terraform module to create &lt;a href=&quot;https://aws.amazon.com/elasticsearch-service/&quot;&gt;Amazon Elasticsearch Service&lt;/a&gt; clusters, following the Well-Architected Framework and best AWS practices.&lt;/p&gt;

&lt;p&gt;Amazon Elasticsearch Service is a fully managed service that makes it easy to deploy, operate, and scale Elasticsearch clusters in the AWS Cloud. Elasticsearch is a popular open-source search and analytics engine for use cases such as log analytics, real-time application monitoring, and clickstream analysis. With Amazon ES, you get direct access to the Elasticsearch APIs; existing code and applications work seamlessly with the service.&lt;/p&gt;

&lt;h2 id=&quot;examples&quot;&gt;Examples&lt;/h2&gt;

&lt;p&gt;Check the &lt;a href=&quot;/examples/&quot;&gt;examples&lt;/a&gt; folder where you can see how to configure a public ES cluster, and another example showing how to set it with VPC options.&lt;/p&gt;

&lt;h2 id=&quot;usage&quot;&gt;Usage&lt;/h2&gt;

&lt;p&gt;You can use this module to create your Amazon ES cluster by defining each parameters blocks as follows:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;module &quot;aws_es&quot; {

  source = &quot;git::https://github.com/lgallard/terraform-aws-elasticsearch.git&quot;

  domain_name           = &quot;elasticsearch_public&quot;
  elasticsearch_version = &quot;7.1&quot;

  cluster_config = {
    dedicated_master_enabled = &quot;true&quot;
    instance_count           = &quot;3&quot;
    instance_type            = &quot;r5.large.elasticsearch&quot;
    zone_awareness_enabled   = &quot;true&quot;
    availability_zone_count  = &quot;3&quot;
  }

  ebs_options = {
    ebs_enabled = &quot;true&quot;
    volume_size = &quot;25&quot;
  }

  encrypt_at_rest = {
    enabled    = &quot;true&quot;
    kms_key_id = &quot;alias/aws/es&quot;
  }

  log_publishing_options = {
    enabled                  = &quot;true&quot;
    log_type                 = &quot;INDEX_SLOW_LOGS&quot;
  }

  advanced_options = {
    &quot;rest.action.multi.allow_explicit_index&quot; = &quot;true&quot;
  }

  node_to_node_encryption_enabled                = &quot;true&quot;
  snapshot_options_automated_snapshot_start_hour = &quot;23&quot;

  tags = {
    Owner = &quot;sysops&quot;
    env   = &quot;dev&quot;
  }

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; You can also define the above ElasticSearch cluster using just the module variables. Instead of defining a &lt;code class=&quot;highlighter-rouge&quot;&gt;cluster_config&lt;/code&gt; block (list of map), you can set each of the &lt;code class=&quot;highlighter-rouge&quot;&gt;cluster_config_*&lt;/code&gt; variables, as shown below:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;module &quot;aws_es&quot; {

  source = &quot;git::https://github.com/lgallard/terraform-aws-elasticsearch.git&quot;

  domain_name           = &quot;elasticsearch_public&quot;
  elasticsearch_version = &quot;7.1&quot;

  cluster_config_dedicated_master_enabled = true
  cluster_config_instance_count           = &quot;3&quot;
  cluster_config_instance_type            = &quot;r5.large.elasticsearch&quot;
  cluster_config_zone_awareness_enabled   = &quot;true&quot;
  cluster_config_availability_zone_count  = &quot;3&quot;

  ebs_options_ebs_enabled = true
  ebs_options_volume_size = &quot;25&quot;

  encrypt_at_rest_enabled    = true
  encrypt_at_rest_kms_key_id = &quot;alias/aws/es&quot;

  log_publishing_options_enabled  = true
  log_publishing_options_log_type = &quot;INDEX_SLOW_LOGS&quot;

  advanced_options = {
    &quot;rest.action.multi.allow_explicit_index&quot; = &quot;true&quot;
  }

  node_to_node_encryption_enabled                = &quot;true&quot;
  snapshot_options_automated_snapshot_start_hour = &quot;23&quot;

  tags = {
    Owner = &quot;sysops&quot;
    env   = &quot;dev&quot;
  }

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;inputs&quot;&gt;Inputs&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Name&lt;/th&gt;
      &lt;th&gt;Description&lt;/th&gt;
      &lt;th&gt;Type&lt;/th&gt;
      &lt;th&gt;Default&lt;/th&gt;
      &lt;th&gt;Required&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;access_policies&lt;/td&gt;
      &lt;td&gt;IAM policy document specifying the access policies for the domain&lt;/td&gt;
      &lt;td&gt;string&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;&quot;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;advanced_options&lt;/td&gt;
      &lt;td&gt;Key-value string pairs to specify advanced configuration options. Note that the values for these configuration options must be strings (wrapped in quotes) or they may be wrong and cause a perpetual diff, causing Terraform to want to recreate your Elasticsearch domain on every apply&lt;/td&gt;
      &lt;td&gt;map(string)&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;{}&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;cluster_config&lt;/td&gt;
      &lt;td&gt;Cluster configuration of the domain&lt;/td&gt;
      &lt;td&gt;map&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;{}&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;cluster_config_availability_zone_count&lt;/td&gt;
      &lt;td&gt;Number of Availability Zones for the domain to use with&lt;/td&gt;
      &lt;td&gt;number&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;3&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;cluster_config_dedicated_master_count&lt;/td&gt;
      &lt;td&gt;Number of dedicated master nodes in the cluster&lt;/td&gt;
      &lt;td&gt;number&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;3&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;cluster_config_dedicated_master_enabled&lt;/td&gt;
      &lt;td&gt;Indicates whether dedicated master nodes are enabled for the cluster&lt;/td&gt;
      &lt;td&gt;bool&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;true&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;cluster_config_dedicated_master_type&lt;/td&gt;
      &lt;td&gt;Instance type of the dedicated master nodes in the cluster&lt;/td&gt;
      &lt;td&gt;string&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;r5.large.elasticsearch&quot;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;cluster_config_instance_count&lt;/td&gt;
      &lt;td&gt;Number of instances in the cluster&lt;/td&gt;
      &lt;td&gt;number&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;3&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;cluster_config_instance_type&lt;/td&gt;
      &lt;td&gt;Instance type of data nodes in the cluster&lt;/td&gt;
      &lt;td&gt;string&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;r5.large.elasticsearch&quot;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;cluster_config_zone_awareness_enabled&lt;/td&gt;
      &lt;td&gt;Indicates whether zone awareness is enabled. To enable awareness with three Availability Zones&lt;/td&gt;
      &lt;td&gt;bool&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;false&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;cognito_options&lt;/td&gt;
      &lt;td&gt;Options for Amazon Cognito Authentication for Kibana&lt;/td&gt;
      &lt;td&gt;map&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;{}&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;cognito_options_enabled&lt;/td&gt;
      &lt;td&gt;Specifies whether Amazon Cognito authentication with Kibana is enabled or not&lt;/td&gt;
      &lt;td&gt;bool&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;false&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;cognito_options_identity_pool_id&lt;/td&gt;
      &lt;td&gt;ID of the Cognito Identity Pool to use&lt;/td&gt;
      &lt;td&gt;string&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;&quot;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;cognito_options_role_arn&lt;/td&gt;
      &lt;td&gt;ARN of the IAM role that has the AmazonESCognitoAccess policy attached&lt;/td&gt;
      &lt;td&gt;string&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;&quot;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;cognito_options_user_pool_id&lt;/td&gt;
      &lt;td&gt;ID of the Cognito User Pool to use&lt;/td&gt;
      &lt;td&gt;string&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;&quot;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;domain_name&lt;/td&gt;
      &lt;td&gt;Name of the domain&lt;/td&gt;
      &lt;td&gt;string&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;ebs_enabled&lt;/td&gt;
      &lt;td&gt;Whether EBS volumes are attached to data nodes in the domain&lt;/td&gt;
      &lt;td&gt;bool&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;true&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;ebs_options&lt;/td&gt;
      &lt;td&gt;EBS related options, may be required based on chosen instance size&lt;/td&gt;
      &lt;td&gt;map&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;{}&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;ebs_options_iops&lt;/td&gt;
      &lt;td&gt;The baseline input/output (I/O) performance of EBS volumes attached to data nodes. Applicable only for the Provisioned IOPS EBS volume type&lt;/td&gt;
      &lt;td&gt;number&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;0&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;ebs_options_volume_size&lt;/td&gt;
      &lt;td&gt;The size of EBS volumes attached to data nodes (in GB). Required if ebs_enabled is set to true&lt;/td&gt;
      &lt;td&gt;number&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;10&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;ebs_options_volume_type&lt;/td&gt;
      &lt;td&gt;The type of EBS volumes attached to data nodes&lt;/td&gt;
      &lt;td&gt;string&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;gp2&quot;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;elasticsearch_version&lt;/td&gt;
      &lt;td&gt;The version of Elasticsearch to deploy.&lt;/td&gt;
      &lt;td&gt;string&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;7.1&quot;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;encrypt_at_rest&lt;/td&gt;
      &lt;td&gt;Encrypt at rest options. Only available for certain instance types&lt;/td&gt;
      &lt;td&gt;map&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;{}&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;encrypt_at_rest_enabled&lt;/td&gt;
      &lt;td&gt;Whether to enable encryption at rest&lt;/td&gt;
      &lt;td&gt;bool&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;true&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;encrypt_at_rest_kms_key_id&lt;/td&gt;
      &lt;td&gt;The KMS key id to encrypt the Elasticsearch domain with. If not specified then it defaults to using the aws/es service KMS key&lt;/td&gt;
      &lt;td&gt;string&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;alias/aws/es&quot;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;log_publishing_options&lt;/td&gt;
      &lt;td&gt;Options for publishing slow logs to CloudWatch Logs&lt;/td&gt;
      &lt;td&gt;map&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;{}&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;log_publishing_options_cloudwatch_log_group_arn&lt;/td&gt;
      &lt;td&gt;iARN of the Cloudwatch log group to which log needs to be published&lt;/td&gt;
      &lt;td&gt;string&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;&quot;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;log_publishing_options_enabled&lt;/td&gt;
      &lt;td&gt;Specifies whether given log publishing option is enabled or not&lt;/td&gt;
      &lt;td&gt;bool&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;true&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;log_publishing_options_log_type&lt;/td&gt;
      &lt;td&gt;A type of Elasticsearch log. Valid values: INDEX_SLOW_LOGS, SEARCH_SLOW_LOGS, ES_APPLICATION_LOGS&lt;/td&gt;
      &lt;td&gt;string&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;INDEX\_SLOW\_LOGS&quot;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;node_to_node_encryption&lt;/td&gt;
      &lt;td&gt;Node-to-node encryption options&lt;/td&gt;
      &lt;td&gt;map&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;{}&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;node_to_node_encryption_enabled&lt;/td&gt;
      &lt;td&gt;Whether to enable node-to-node encryption&lt;/td&gt;
      &lt;td&gt;bool&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;true&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;snapshot_options&lt;/td&gt;
      &lt;td&gt;Snapshot related options&lt;/td&gt;
      &lt;td&gt;map&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;{}&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;snapshot_options_automated_snapshot_start_hour&lt;/td&gt;
      &lt;td&gt;Hour during which the service takes an automated daily snapshot of the indices in the domain&lt;/td&gt;
      &lt;td&gt;number&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;0&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;tags&lt;/td&gt;
      &lt;td&gt;A mapping of tags to assign to the resource&lt;/td&gt;
      &lt;td&gt;map&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;{}&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;vpc_options&lt;/td&gt;
      &lt;td&gt;VPC related options, see below. Adding or removing this configuration forces a new resource&lt;/td&gt;
      &lt;td&gt;map&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;{}&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;vpc_options_security_group_ids&lt;/td&gt;
      &lt;td&gt;List of VPC Security Group IDs to be applied to the Elasticsearch domain endpoints. If omitted, the default Security Group for the VPC will be used&lt;/td&gt;
      &lt;td&gt;list&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;[]&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;vpc_options_subnet_ids&lt;/td&gt;
      &lt;td&gt;List of VPC Subnet IDs for the Elasticsearch domain endpoints to be created in&lt;/td&gt;
      &lt;td&gt;list&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;[]&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;outputs&quot;&gt;Outputs&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Name&lt;/th&gt;
      &lt;th&gt;Description&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;arn&lt;/td&gt;
      &lt;td&gt;Amazon Resource Name (ARN) of the domain&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;domain_id&lt;/td&gt;
      &lt;td&gt;Unique identifier for the domain&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;endpoint&lt;/td&gt;
      &lt;td&gt;Domain-specific endpoint used to submit index, search, and data upload requests&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;kibana_endpoint&lt;/td&gt;
      &lt;td&gt;Domain-specific endpoint for kibana without https scheme&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;vpc_options_availability_zones&lt;/td&gt;
      &lt;td&gt;If the domain was created inside a VPC, the names of the availability zones the configured subnet_ids were created inside&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;vpc_options_vpc_id&lt;/td&gt;
      &lt;td&gt;If the domain was created inside a VPC, the ID of the VPC&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/lgallard/terraform-aws-elasticsearch&quot; target=&quot;_blank&quot;&gt;terraform-aws-elastichsearch module at github&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://registry.terraform.io/modules/lgallard/elasticsearch/aws/&quot; target=&quot;_blank&quot;&gt;terraform-aws-elasticsearch module at Terraform registry&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>Luis Gallardo</name></author><category term="AWS" /><category term="Terraform" /><summary type="html"></summary></entry><entry><title type="html">Terraform module for AWS Backup</title><link href="https://lgallardo.com/es/2019/10/18/terraform-module-for-aws-backup" rel="alternate" type="text/html" title="Terraform module for AWS Backup" /><published>2019-10-17T19:00:00-05:00</published><updated>2019-10-17T19:00:00-05:00</updated><id>https://lgallardo.com/es/2019/10/18/terraform-module-for-aws-backup</id><content type="html" xml:base="https://lgallardo.com/es/2019/10/18/terraform-module-for-aws-backup">&lt;center&gt;&lt;img src=&quot;/images/terraform-aws-backup-terraform-registry.jpg&quot; alt=&quot;Terraform&quot; /&gt;&lt;/center&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Acabo de publicar mi primer módulo Terraform de código abierto llamado &lt;strong&gt;terraform-aws-backup&lt;/strong&gt; en github, así que decidí compartirlo también en el Registro público de Terraform.&lt;/p&gt;

&lt;p&gt;Puedes verificar mi módulo &lt;strong&gt;terraform-aws-backup&lt;/strong&gt; en el &lt;a href=&quot;https://registry.terraform.io/modules/lgallard/backup/aws&quot; target=&quot;_blank&quot;&gt;Terraform Registry&lt;/a&gt; o clonarlo de &lt;a href=&quot;https://github.com/lgallard/terraform-aws-backup.git&quot; target=&quot;_blank&quot;&gt;github&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Si quieres echar un vistazo al módulo, también dejé el archivo README en esta publicación:&lt;/p&gt;

&lt;h1 id=&quot;terraform-aws-backup&quot;&gt;terraform-aws-backup&lt;/h1&gt;

&lt;p&gt;Terraform module to create &lt;a href=&quot;https://aws.amazon.com/backup/&quot; target=&quot;_blank&quot;&gt;AWS Backup&lt;/a&gt; plans.  AWS Backup is a fully managed backup service that makes it easy to centralize and automate the back up of data across AWS services (EBS volumes, RDS databases, DynamoDB tables, EFS file systems, and Storage Gateway volumes).&lt;/p&gt;

&lt;h2 id=&quot;usage&quot;&gt;Usage&lt;/h2&gt;

&lt;p&gt;You can use this module to create a simple plan using the module’s &lt;code class=&quot;highlighter-rouge&quot;&gt;rule_*&lt;/code&gt; variables. You can also  use the &lt;code class=&quot;highlighter-rouge&quot;&gt;rules&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;selections&lt;/code&gt; list of maps variables to build a more complete plan by defining several rules and selections at once.&lt;/p&gt;

&lt;p&gt;Check the &lt;a href=&quot;https://github.com/lgallard/terraform-aws-backup/tree/master/examples&quot; target=&quot;_blank&quot;&gt;examples&lt;/a&gt; for the  &lt;strong&gt;simple plan&lt;/strong&gt;, the &lt;strong&gt;simple plan with list&lt;/strong&gt; and the &lt;strong&gt;complete plan&lt;/strong&gt; snippets.&lt;/p&gt;

&lt;h3 id=&quot;example-complete-plan&quot;&gt;Example (complete plan)&lt;/h3&gt;

&lt;p&gt;This example creates a plan with two rules and two selections at once. It also defines a vault key which is used by the first rule because no &lt;code class=&quot;highlighter-rouge&quot;&gt;target_vault_name&lt;/code&gt; was given (null). Whereas the second rule is using the “Default” vault key.&lt;/p&gt;

&lt;p&gt;The first selection has two assignments, the first defined by a resource ARN and the second one defined by a tag condition. The second selection has just one assignment defined by a resource ARN.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;module &quot;aws_backup_example&quot; {

  source = &quot;../modules/terraform-aws-backup&quot;

  # Vault
  vault_name = &quot;vault-3&quot;

  # Plan
  plan_name = &quot;complete-plan&quot;

  # Multiple rules using a list of maps
  rules = [
    {
      name              = &quot;rule-1&quot;
      schedule          = &quot;cron(0 12 * * ? *)&quot;
      target_vault_name = null
      start_window      = 120
      completion_window = 360
      lifecycle = {
        cold_storage_after = 0
        delete_after       = 90
      },
      recovery_point_tags = {
        Environment = &quot;production&quot;
      }
    },
    {
      name                = &quot;rule-2&quot;
      target_vault_name   = &quot;Default&quot;
      schedule            = null
      start_window        = 120
      completion_window   = 360
      lifecycle           = {}
      recovery_point_tags = {}
    },
  ]

  # Multiple selections
  #  - Selection-1: By resources and tag
  #  - Selection-2: Only by resources
  selections = [
    {
      name      = &quot;selection-1&quot;
      resources = [&quot;arn:aws:dynamodb:us-east-1:123456789101:table/mydynamodb-table1&quot;]
      selection_tag = {
        type  = &quot;STRINGEQUALS&quot;
        key   = &quot;Environment&quot;
        value = &quot;production&quot;
      }
    },
    {
      name          = &quot;selection-2&quot;
      resources     = [&quot;arn:aws:dynamodb:us-east-1:123456789101:table/mydynamodb-table2&quot;]
      selection_tag = {}
    },
  ]

  tags = {
    Owner       = &quot;backup team&quot;
    Environment = &quot;production&quot;
    Terraform   = true
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;inputs&quot;&gt;Inputs&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Name&lt;/th&gt;
      &lt;th&gt;Description&lt;/th&gt;
      &lt;th&gt;Type&lt;/th&gt;
      &lt;th&gt;Default&lt;/th&gt;
      &lt;th&gt;Required&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;plan_name&lt;/td&gt;
      &lt;td&gt;The display name of a backup plan&lt;/td&gt;
      &lt;td&gt;`string`&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;rule_completion_window&lt;/td&gt;
      &lt;td&gt;The amount of time AWS Backup attempts a backup before canceling the job and returning an error&lt;/td&gt;
      &lt;td&gt;`number`&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;rule_lifecycle_cold_storage_after&lt;/td&gt;
      &lt;td&gt;Specifies the number of days after creation that a recovery point is moved to cold storage&lt;/td&gt;
      &lt;td&gt;`number`&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;rule_lifecycle_delete_after&lt;/td&gt;
      &lt;td&gt;Specifies the number of days after creation that a recovery point is deleted. Must be 90 days greater than `cold_storage_after`&lt;/td&gt;
      &lt;td&gt;`number`&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;rule_name&lt;/td&gt;
      &lt;td&gt;An display name for a backup rule&lt;/td&gt;
      &lt;td&gt;`string`&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;rule_recovery_point_tags&lt;/td&gt;
      &lt;td&gt;Metadata that you can assign to help organize the resources that you create&lt;/td&gt;
      &lt;td&gt;`map(string)`&lt;/td&gt;
      &lt;td&gt;`{}`&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;rule_schedule&lt;/td&gt;
      &lt;td&gt;A CRON expression specifying when AWS Backup initiates a backup job&lt;/td&gt;
      &lt;td&gt;`string`&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;rule_start_window&lt;/td&gt;
      &lt;td&gt;The amount of time in minutes before beginning a backup&lt;/td&gt;
      &lt;td&gt;`number`&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;rules&lt;/td&gt;
      &lt;td&gt;A list of rule maps&lt;/td&gt;
      &lt;td&gt;`list`&lt;/td&gt;
      &lt;td&gt;`[]`&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;selection_name&lt;/td&gt;
      &lt;td&gt;The display name of a resource selection document&lt;/td&gt;
      &lt;td&gt;`string`&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;selection_resources&lt;/td&gt;
      &lt;td&gt;An array of strings that either contain Amazon Resource Names (ARNs) or match patterns of resources to assign to a backup plan&lt;/td&gt;
      &lt;td&gt;`list`&lt;/td&gt;
      &lt;td&gt;`[]`&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;selection_tag_key&lt;/td&gt;
      &lt;td&gt;The key in a key-value pair&lt;/td&gt;
      &lt;td&gt;`string`&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;selection_tag_type&lt;/td&gt;
      &lt;td&gt;An operation, such as StringEquals, that is applied to a key-value pair used to filter resources in a selection&lt;/td&gt;
      &lt;td&gt;`string`&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;selection_tag_value&lt;/td&gt;
      &lt;td&gt;The value in a key-value pair&lt;/td&gt;
      &lt;td&gt;`string`&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;selections&lt;/td&gt;
      &lt;td&gt;A list of selction maps&lt;/td&gt;
      &lt;td&gt;`list`&lt;/td&gt;
      &lt;td&gt;`[]`&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;tags&lt;/td&gt;
      &lt;td&gt;A mapping of tags to assign to the resource&lt;/td&gt;
      &lt;td&gt;`map(string)`&lt;/td&gt;
      &lt;td&gt;`{}`&lt;/td&gt;
      &lt;td&gt;no&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;vault_kms_key_arn&lt;/td&gt;
      &lt;td&gt;The server-side encryption key that is used to protect your backups&lt;/td&gt;
      &lt;td&gt;`string`&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;vault_name&lt;/td&gt;
      &lt;td&gt;Name of the backup vault to create. If not given, AWS use default&lt;/td&gt;
      &lt;td&gt;`string`&lt;/td&gt;
      &lt;td&gt;n/a&lt;/td&gt;
      &lt;td&gt;yes&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;outputs&quot;&gt;Outputs&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Name&lt;/th&gt;
      &lt;th&gt;Description&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;plan_arn&lt;/td&gt;
      &lt;td&gt;The ARN of the backup plan&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;plan_id&lt;/td&gt;
      &lt;td&gt;The id of the backup plan&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;plan_version&lt;/td&gt;
      &lt;td&gt;Unique, randomly generated, Unicode, UTF-8 encoded string that serves as the version ID of the backup plan&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;vault_arn&lt;/td&gt;
      &lt;td&gt;The ARN of the vault&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;vault_id&lt;/td&gt;
      &lt;td&gt;The name of the vault&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;known-issues&quot;&gt;Known issues&lt;/h2&gt;

&lt;p&gt;During the developing of the module I found some issues reported to the The AWS provider:&lt;/p&gt;

&lt;h3 id=&quot;related-backup-plan-selections-must-be-deleted-prior-to-backup-plan-deletion&quot;&gt;Related backup plan selections must be deleted prior to backup plan deletion&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ terraform destroy
...
module.aws_backup_example.aws_iam_policy.ab_tag_policy: Destruction complete after 2s
module.aws_backup_example.aws_iam_role.ab_role: Destruction complete after 1s

Error: error deleting Backup Plan: InvalidRequestException: Related backup plan selections must be deleted prior to backup plan deletion
	status code: 400, request id: 4a6637c8-2d46-4714-9929-4df3f694979b

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When trying to destroy a plan, terraform complains about deleting the selections first, even though terraform tries to delete them in the right order:&lt;/p&gt;

&lt;p&gt;This issue was reported as &lt;a href=&quot;https://github.com/terraform-providers/terraform-provider-aws/issues/10414&quot; target=&quot;_blank&quot;&gt;&lt;em&gt;Backup Plan deletion fails randomly&lt;/em&gt;&lt;/a&gt; for the AWS Provider.&lt;/p&gt;

&lt;p&gt;This happens because thee AWS provider tries to delete the plan without waiting for the selections destroyal confirmation.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Workaround:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;I included and script in the examples that destroys the selections first and then destroys the plan:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; cat terraform_destroy_aws_backup.sh

 #!/bin/sh
targets=&quot;&quot;
for i in `terraform state list | grep &quot;selection&quot;`; do targets=&quot;${targets} --target=${i}&quot;; done

# Destroy selections
terraform destroy ${targets}

# Destroy all
terraform destroy

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;error-creating-backup-selection-iam-role-is-not-authorized-to-call-taggetresources&quot;&gt;Error creating Backup Selection: IAM Role is not authorized to call tag:GetResources&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Error: error creating Backup Selection: InvalidParameterValueException: IAM Role arn:aws:iam::111111111111:role/aws-backup-plan-complete-plan-role is not authorized to call tag:GetResources
	status code: 400, request id: 07ab775d-8885-4240-bb99-41305df969e0

  on .terraform/modules/aws_backup_example/selection.tf line 1, in resource &quot;aws_backup_selection&quot; &quot;ab_selection&quot;:
   1: resource &quot;aws_backup_selection&quot; &quot;ab_selection&quot; {
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This issue was reported as &lt;a href=&quot;https://github.com/terraform-providers/terraform-provider-aws/issues/10511&quot; target=&quot;_blank&quot;&gt;aws_backup_selection.selection: error creating Backup Selection: InvalidParameterValueException&lt;/a&gt; for the AWS Provider.&lt;/p&gt;

&lt;p&gt;I faced this when applying and destroying the same plan several times, for instance when I ws developing the module.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Workaround:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;I couldn’t find any workaround for this. Just destroy all wait some time and apply again.&lt;/p&gt;

&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/lgallard/terraform-aws-backup.git&quot; target=&quot;_blank&quot;&gt;terraform-aws-backup module at github&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://registry.terraform.io/modules/lgallard/backup/aws&quot; target=&quot;_blank&quot;&gt;terraform-aws-backup module at Terraform registry&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>Luis Gallardo</name></author><category term="AWS" /><category term="Terraform" /><summary type="html"></summary></entry><entry><title type="html">Skill de Alexa: Días Festivos</title><link href="https://lgallardo.com/es/2019/07/05/holidays-alexa-skill" rel="alternate" type="text/html" title="Skill de Alexa: Días Festivos" /><published>2019-07-04T19:00:00-05:00</published><updated>2019-07-04T19:00:00-05:00</updated><id>https://lgallardo.com/es/2019/07/05/holidays-alexa-skill</id><content type="html" xml:base="https://lgallardo.com/es/2019/07/05/holidays-alexa-skill">&lt;center&gt;&lt;img src=&quot;/images/first_skill.jpg&quot; alt=&quot;Skill - Días Festivos&quot; /&gt;&lt;/center&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Hoy recibí la aprobación de publicación de mi primera skill de Alexa en español. El nombre de la skill es &lt;strong&gt;&lt;em&gt;Días Festivos&lt;/em&gt;&lt;/strong&gt;, y permite saber cuándo es el próximo día feriado de un mes en particular, preguntar por algunas festividades como por ejemplo, cuándo cae Navidad, o cuántos días feriado tiene un mes.&lt;/p&gt;

&lt;p&gt;Los países donde se pueden consultar los días festivos son &lt;strong&gt;Argentina&lt;/strong&gt;, Alemania, Australia, Austria, Belarus, Belgium, Brazil, Bulgaria, Canadá, &lt;strong&gt;Colombia&lt;/strong&gt;, Croacia, Czech, Escocia, Eslovenia, Eslovaquia, &lt;strong&gt;España&lt;/strong&gt;, &lt;strong&gt;Estados Unidos&lt;/strong&gt;, Dinamarca, Finlandia, Francia, Gales, Hungaría, India, Irlanda, Isla de Man, Italia, Japón, Lituania, Luxemburgo, &lt;strong&gt;México&lt;/strong&gt;, Noruega, Nueva Zelandia, Países Bajos, Polonia, Portugal, &lt;strong&gt;Reino Unido&lt;/strong&gt;, Rusia, Sudáfrica, Suecia, Suiza, Ucrania.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;NOTA:&lt;/strong&gt; Si su país no está listado, la skill usará &lt;strong&gt;España&lt;/strong&gt; como país por omisión.&lt;/p&gt;

&lt;h1 id=&quot;instalación&quot;&gt;Instalación&lt;/h1&gt;
&lt;p&gt;Para instalar la skill ve a la app de Alexa y habilita la skill &lt;strong&gt;&lt;em&gt;Días festivos&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;h1 id=&quot;cómo-funciona&quot;&gt;¿Cómo funciona?&lt;/h1&gt;

&lt;p&gt;Como cualquier skill, pidele a Alexa que abra la skill:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Alexa, abre la skill días festivos&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Luego del mensaje de bienvenida le puedes preguntar:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;¿Cuándo es el próximo feriado?&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;También le puedes preguntar directamente a Alexa de esta forma:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Alexa, pregúntale a días festivos cuando cae navidad
Alexa, pregúntale a días festivos cuántos días feriados tiene febrero
Alexa, cuándo es el próximo feriado&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;y-qué-mas-hace-la-skill&quot;&gt;¿Y qué mas hace la skill?&lt;/h1&gt;

&lt;p&gt;Espero agregarle mas funcionalidades, y en un futuro expandir el listado de países.&lt;/p&gt;</content><author><name>Luis Gallardo</name></author><category term="AWS" /><category term="Alexa" /><summary type="html"></summary></entry><entry><title type="html">Cómo migrar tfstates remotos en Terraform</title><link href="https://lgallardo.com/es/2019/06/25/how-to-migrate-terraform-remote-tfstates/" rel="alternate" type="text/html" title="Cómo migrar tfstates remotos en Terraform" /><published>2019-06-24T19:00:00-05:00</published><updated>2019-06-24T19:00:00-05:00</updated><id>https://lgallardo.com/es/2019/06/25/how-to-migrate-terraform-remote-tfstates</id><content type="html" xml:base="https://lgallardo.com/es/2019/06/25/how-to-migrate-terraform-remote-tfstates/">&lt;center&gt;&lt;img src=&quot;/images/terraform-remote-states.jpg&quot; alt=&quot;Terraform&quot; /&gt;&lt;/center&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;En Terraform uno tiene la posibilidad de renombrar y mover recursos y módulos en un mismo tfstate tanto si es local como remoto. Pero cuando se quiere migrar de recursos o módulos entre tftstates remotos hay que tomar otras consideraciones.&lt;/p&gt;

&lt;p&gt;Para resolver esto lo que se tiene que hacer es traerse la configuración remota, luego mover el recurso de forma local, y una vez que se haya movido, subir el cambio al tftstate remoto.&lt;/p&gt;

&lt;p&gt;Veamos el procedimiento:&lt;/p&gt;

&lt;p&gt;1) Traerse el tfstate remoto de destino:
  &lt;/p&gt;

&lt;p&gt;Para mover los recursos de un tfstate a otro se necesita tener de forma local el tfstate destino:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ terraform state pull &amp;gt; dev.tfstate
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;2) Mover el recurso o módulo a este tfstate local&lt;/p&gt;

&lt;p&gt;En este ejemplo se desea mover el recurso &lt;code class=&quot;highlighter-rouge&quot;&gt;module.lambda.module.your_funtion&lt;/code&gt; a &lt;code class=&quot;highlighter-rouge&quot;&gt;module.your_function&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ terraform state mv -state-out=dev.tfstate module.lambda.module.your_function module.your_function
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;3) Subir el cambio al tftstate remoto&lt;/p&gt;

&lt;p&gt;El recurso se movió de un estado a otro, pero se hizo de forma local. Para que quede en el tftstate remoto de destino se debe subir:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ terraform state push dev.tfstate
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;En algunos casos puede requerirse el uso de la opción &lt;code class=&quot;highlighter-rouge&quot;&gt;-force&lt;/code&gt;, por ejemplo cuando se tuvo problemas con la inicialización del módulo , por lo que la orden anterior quedaría de la siguiente manera:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ terraform state push -force dev.tfstate
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Por último, y una vez que haya comprobado que todo está correctamente, puede borrar el tftstate local:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ rm dev.tfstate*
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;referencias&quot;&gt;Referencias:&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://medium.com/@lynnlin827/moving-terraform-resources-states-from-one-remote-state-to-another-c76f8b76a996&quot; target=&quot;_blank&quot;&gt;Moving Terraform Resources’ States from One Remote State to Another&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/50400007/terraform-how-to-migrate-state-between-projects&quot; target=&quot;_blank&quot;&gt;Terraform: How to migrate state between projects?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>Luis Gallardo</name></author><category term="AWS" /><category term="Terraform" /><summary type="html"></summary></entry><entry><title type="html">Bloques dinámicos en Terraform 0.12.x</title><link href="https://lgallardo.com/es/2019/06/14/dynamic-blocks-in-terraform-0.12.x/" rel="alternate" type="text/html" title="Bloques dinámicos en Terraform 0.12.x" /><published>2019-06-13T19:00:00-05:00</published><updated>2019-06-13T19:00:00-05:00</updated><id>https://lgallardo.com/es/2019/06/14/dynamic-blocks-in-terraform-0.12.x</id><content type="html" xml:base="https://lgallardo.com/es/2019/06/14/dynamic-blocks-in-terraform-0.12.x/">&lt;center&gt;&lt;img src=&quot;/images/terraform.jpg&quot; alt=&quot;Terraform&quot; /&gt;&lt;/center&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Hace un tiempo escribí sobre &lt;a href=&quot;https://lgallardo.com/2018/07/30/dynamic-configuration-blocks-in-terraform&quot; target=&quot;_blank&quot;&gt;cómo hacer bloques dinámicos en Terraform 0.11.x&lt;/a&gt;, que si bien resolvía el problema generaba otros debido a que era no era una solución oficial.&lt;/p&gt;

&lt;p&gt;En esencia lo que hacía era definir los bloques de forma dinámica usando una asiganción a una lista de maps. Es decir, en vez de hacer esto:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;resource &quot;aws_codebuild_project&quot; &quot;codebuild&quot; {

[...]

  artifacts{
      type           = &quot;${var.codebuild_artifacts_type}&quot;
      location       = &quot;${var.codebuild_artifacts_location}&quot;
      name           = &quot;${var.codebuild_artifacts_name}&quot;
      namespace_type = &quot;${var.codebuild_artifacts_namespace_type}&quot;
      packaging      = &quot;${var.codebuild_artifacts_packaging}&quot;
      path           = &quot;${var.codebuild_artifacts_path}&quot;

  }
}

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Se sustituía por:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;resource &quot;aws_codebuild_project&quot; &quot;codebuild&quot; {

[...]

  artifacts = [&quot;${local.codebuild_artifacts}&quot;]

}

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Donde &lt;code class=&quot;highlighter-rouge&quot;&gt;local.codebuild_artifacts&lt;/code&gt; se construida a partir de una lista de maps, que dependiendo del tipo definido en la variable &lt;code class=&quot;highlighter-rouge&quot;&gt;codebuild_artifacts_type&lt;/code&gt; creaba un bloque diferente:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
locals {
  codebuild_artifacts_def = {
    &quot;S3&quot; = [{
      type                = &quot;${var.codebuild_artifacts_type}&quot;
      location            = &quot;${var.codebuild_artifacts_location}&quot;
      name                = &quot;${var.codebuild_artifacts_name}&quot;
      namespace_type      = &quot;${var.codebuild_artifacts_namespace_type}&quot;
      packaging           = &quot;${var.codebuild_artifacts_packaging}&quot;
      path                = &quot;${var.codebuild_artifacts_path}&quot;
      encryption_disabled = var.codebuild_artifacts_encryption_disabled
    }]

    &quot;CODEPIPELINE&quot; = [{
      type                = &quot;${var.codebuild_artifacts_type}&quot;
      location            = &quot;${var.codebuild_artifacts_location}&quot;
      name                = &quot;${var.codebuild_artifacts_name}&quot;
      namespace_type      = &quot;${var.codebuild_artifacts_namespace_type}&quot;
      packaging           = &quot;${var.codebuild_artifacts_packaging}&quot;
      path                = &quot;${var.codebuild_artifacts_path}&quot;
      encryption_disabled = var.codebuild_artifacts_encryption_disabled
    }]

    &quot;NO_ARTIFACTS&quot; = [{
      type = &quot;${var.codebuild_artifacts_type}&quot;
    }]
  }

  # Retuned map
  codebuild_artifacts = &quot;${local.codebuild_artifacts_def[var.codebuild_artifacts_type]}&quot;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h1 id=&quot;bloques-dinámicos-en-terraform-012x&quot;&gt;Bloques dinámicos en Terraform 0.12.x&lt;/h1&gt;

&lt;p&gt;Terraform 0.12.x propone el uso de &lt;a href=&quot;https://www.hashicorp.com/blog/hashicorp-terraform-0-12-preview-for-and-for-each&quot; target=&quot;_blank&quot;&gt;bloques dinámicos&lt;/a&gt; para solucionar este y otros casos relacionados a bloques. Para esto hay que usar &lt;code class=&quot;highlighter-rouge&quot;&gt;dynamic&lt;/code&gt; y &lt;code class=&quot;highlighter-rouge&quot;&gt;for-each&lt;/code&gt;. Por ejemplo, para la definición de arriba tendriamos lo siguiente:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  dynamic &quot;artifacts&quot; {
    for_each = [local.codebuild_artifacts]
    content {
      type                = artifacts.value.type
      encryption_disabled = lookup(artifacts.value, &quot;encryption_disabled&quot;, null)
      location            = lookup(artifacts.value, &quot;location&quot;, null)
      name                = lookup(artifacts.value, &quot;name&quot;, null)
      namespace_type      = lookup(artifacts.value, &quot;namespace_type&quot;, null)
      packaging           = lookup(artifacts.value, &quot;packaging&quot;, null)
      path                = lookup(artifacts.value, &quot;path&quot;, null)
    }
  }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Y la definición de &lt;code class=&quot;highlighter-rouge&quot;&gt;local.codebuild_artifacts&lt;/code&gt; se simplifica enormemente:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;locals {
  codebuild_artifacts = {
    type                = var.codebuild_artifacts_type
    location            = var.codebuild_artifacts_location
    name                = var.codebuild_artifacts_name
    namespace_type      = var.codebuild_artifacts_namespace_type
    packaging           = var.codebuild_artifacts_packaging
    path                = var.codebuild_artifacts_path
    encryption_disabled = var.codebuild_artifacts_encryption_disabled
  }
}

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;¿Dónde está la magia?&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Primero, en el tipo de datos &lt;code class=&quot;highlighter-rouge&quot;&gt;null&lt;/code&gt;, el cual le dice a Terraform que ignore el atributo si la función &lt;code class=&quot;highlighter-rouge&quot;&gt;lookup&lt;/code&gt; no encuentra el índice en el map.&lt;/p&gt;

&lt;p&gt;Veamos las primeras línea de la definición del bloque  &lt;code class=&quot;highlighter-rouge&quot;&gt;content&lt;/code&gt;, que es lo que se subsituye en el bloque &lt;code class=&quot;highlighter-rouge&quot;&gt;artifacts&lt;/code&gt; en cada iteración:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    content {
      type                = artifacts.value.type
      encryption_disabled = lookup(artifacts.value, &quot;encryption_disabled&quot;, null)
      location            = lookup(artifacts.value, &quot;location&quot;, null)
      ...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Acá se puede apreciar que:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;El atributo &lt;code class=&quot;highlighter-rouge&quot;&gt;type&lt;/code&gt; siempre se define acorde al valor de &lt;code class=&quot;highlighter-rouge&quot;&gt;artifacts.value.type&lt;/code&gt;. Es decir, no se toma del map.&lt;/li&gt;
  &lt;li&gt;El atributo &lt;code class=&quot;highlighter-rouge&quot;&gt;encryption_disabled&lt;/code&gt; se asigna si se consigue en el map algo como &lt;code class=&quot;highlighter-rouge&quot;&gt;artifacts.value['encryption_disabled']&lt;/code&gt;. Si este ínidce no existe se le asiga &lt;code class=&quot;highlighter-rouge&quot;&gt;null&lt;/code&gt; y por ende no será tomado en cuenta pot Terraform.&lt;/li&gt;
  &lt;li&gt;Y es igual para el resto de los atributos, como por ejemplo &lt;code class=&quot;highlighter-rouge&quot;&gt;location&lt;/code&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Esto permite tener definiciones de bloques dinámicas, pero teniendo en cuenta que se deben definir ciertos valores en conjunto. Por ejemplo, para &lt;code class=&quot;highlighter-rouge&quot;&gt;S3&lt;/code&gt;se debe definir las variables:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;var.codebuild_artifacts_type
var.codebuild_artifacts_location
var.codebuild_artifacts_name
var.codebuild_artifacts_namespace_type
var.codebuild_artifacts_packaging
var.codebuild_artifacts_path
var.codebuild_artifacts_encryption_disabled
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Mientras que para &lt;code class=&quot;highlighter-rouge&quot;&gt;NO_ARTIFACTS&lt;/code&gt; basta con:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;var.codebuild_artifacts_type
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Por otro lado, la magia se completa por el hecho de que no se está usando la asingación para el bloque &lt;code class=&quot;highlighter-rouge&quot;&gt;artifacts&lt;/code&gt; sino por la definición del bloque. Es decir, en vez de usar esta asignación:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; artifacts = [&quot;${local.codebuild_artifacts}&quot;]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Se usa la definición de bloque dinámico.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  dynamic &quot;artifacts&quot; {
    for_each = [local.codebuild_artifacts]
    content {
      ...
  }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;referencias&quot;&gt;Referencias:&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://lgallardo.com/2018/07/30/dynamic-configuration-blocks-in-terraform&quot; target=&quot;_blank&quot;&gt;Bloques dinámicos en Terraform 0.11.x&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.hashicorp.com/blog/hashicorp-terraform-0-12-preview-for-and-for-each&quot; target=&quot;_blank&quot;&gt;HashiCorp Terraform 0.12 Preview: For and For-Each&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>Luis Gallardo</name></author><category term="AWS" /><category term="Terraform" /><summary type="html"></summary></entry><entry><title type="html">Guru of the week</title><link href="https://lgallardo.com/es/2019/05/13/2019-05-13-guru-of-the-week" rel="alternate" type="text/html" title="Guru of the week" /><published>2019-05-12T19:00:00-05:00</published><updated>2019-05-12T19:00:00-05:00</updated><id>https://lgallardo.com/es/2019/05/13/a-cloud-guru-of-the-week</id><content type="html" xml:base="https://lgallardo.com/es/2019/05/13/2019-05-13-guru-of-the-week">&lt;center&gt;&lt;img src=&quot;/images/guru-of-the-week-1.jpg&quot; alt=&quot;Guru of the week&quot; width=&quot;500&quot; height=&quot;386&quot; /&gt;&lt;/center&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;La semana pasada respondí la  &lt;a href=&quot;https://acloud.guru/forums/guru-of-the-week/discussion/-Ldw3i4mdiMIpJGY6tem/%5Baws%5D_-_guru_of_the_week_quest&quot; target=&quot;_blank&quot;&gt;pregunta del Guru of the Week&lt;/a&gt; y gané!. Algunas preguntas pueden ser truculentas, pero la clave es pensar en cuál servicio o tecnología resuelve mejor el problema.&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;/images/guru-of-the-week-2.jpg&quot; alt=&quot;Guru of the week&quot; width=&quot;500&quot; height=&quot;386&quot; /&gt;&lt;/center&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Cada semana hacen una nueva pregunta y los ganadores son mencionados en &lt;a href=&quot;https://acloud.guru/series/aws-this-week&quot; target=&quot;_blank&quot;&gt;AWS This Week&lt;/a&gt; de &lt;a href=&quot;https://acloud.guru/&quot; target=&quot;_blank&quot;&gt;A Cloud Guru&lt;/a&gt;. También ganan un premio que consiste en una camiseta, etiquetas y la oportunidad de ganar un pasaje gratis para la &lt;strong&gt;re:Invent 2019&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Ver el resumen de &lt;a href=&quot;https://acloud.guru/series/aws-this-week&quot; target=&quot;_blank&quot;&gt;AWS This Week&lt;/a&gt; es una excelente forma de mantenerce entereado de los cambios en AWS y de conocer nuevos servicios y tecnologías.&lt;/p&gt;

&lt;h2 id=&quot;referencias&quot;&gt;Referencias&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://acloud.guru/series/aws-this-week&quot; target=&quot;_blank&quot;&gt;AWS This Week&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://acloud.guru/forums/guru-of-the-week/&quot; target=&quot;_blank&quot;&gt;Guru of the Week questions&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://facebook/acloudgutu&quot; target=&quot;_blank&quot;&gt;Guru of the Week questions - Facebook&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://acloud.guru&quot; target=&quot;_blank&quot;&gt;A Cloud Guru&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>Luis Gallardo</name></author><category term="AWS" /><summary type="html"></summary></entry><entry><title type="html">AWS Certified Alexa Skill Builder - Specialty</title><link href="https://lgallardo.com/es/2019/04/19/2019-04-19-aws-certified-alexa-skill-builder-specialty/" rel="alternate" type="text/html" title="AWS Certified Alexa Skill Builder - Specialty" /><published>2019-04-18T19:00:00-05:00</published><updated>2019-04-18T19:00:00-05:00</updated><id>https://lgallardo.com/es/2019/04/19/aws-certified-alexa-skill-builder-specialty</id><content type="html" xml:base="https://lgallardo.com/es/2019/04/19/2019-04-19-aws-certified-alexa-skill-builder-specialty/">&lt;center&gt;&lt;img src=&quot;/images/AWS_Certified_Alexa_Skill_Builder_Specialty.jpg&quot; alt=&quot;AWS CSA&quot; width=&quot;500&quot; height=&quot;386&quot; /&gt;&lt;/center&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;En enero presenté el examen beta &lt;code class=&quot;highlighter-rouge&quot;&gt;AWS Certified Alexa Skill Builder Specialty&lt;/code&gt; y ayer me llegó el resultado. Yo venía programando Skills de Alexa y cuando vi el blueprint del examen me llamó la atención que mucho del contenido ya lo conocía de una u otra forma.&lt;/p&gt;

&lt;p&gt;Fueron 80 preguntas para responder en 170 minutos, similar a un examen Professional.&lt;/p&gt;

&lt;h2 id=&quot;cómo-me-preparé&quot;&gt;¿Cómo me preparé?&lt;/h2&gt;

&lt;p&gt;A diferencia de otros examenes que he presentado la preparación para este fue diferente, ya que siendo un examen beta no existía ningún curso ni material didáctico enfocado para la certifiación.&lt;/p&gt;

&lt;p&gt;Antes de conocer la existencia del examen beta yo ya estaba experimentando con Alexa, y de hecho había visto el curso de la gente de &lt;code class=&quot;highlighter-rouge&quot;&gt;A Cloud Guru&lt;/code&gt; llamado &lt;a href=&quot;https://acloud.guru/learn/intro-alexa-free&quot; target=&quot;_blank&quot;&gt;Introduction to Alexa&lt;/a&gt;, que si bien está bueno para empezar es muy básico ya que solo toman los ejemplos que se consiguen en los repositorios de git de AWS, modificando solo un par de cosas en el código.&lt;/p&gt;

&lt;p&gt;También había seguido la serie de videos &lt;a href=&quot;https://acloud.guru/series/alexa-devs&quot; target=&quot;_blank&quot;&gt;Alexa Devs&lt;/a&gt;, la cual tiene mas contenidos que el curso introductorio, acá hay información mas especifica como el de el manejo de videos y pantallas.&lt;/p&gt;

&lt;h2 id=&quot;pero-qué-estudiar&quot;&gt;¿Pero qué estudiar?&lt;/h2&gt;

&lt;p&gt;Hay que estar bien familiarizado con los contenidos del blueprint que proporcionan al registrarse en el examen:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Domain&lt;/th&gt;
      &lt;th&gt;% of Examination&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Domain 1: Voice-First Design Practices and Capabilities&lt;/td&gt;
      &lt;td&gt;14%&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Domain 2: Skill Design&lt;/td&gt;
      &lt;td&gt;24%&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Domain 3: Skill Architecture&lt;/td&gt;
      &lt;td&gt;14%&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Domain 4: Skill Development&lt;/td&gt;
      &lt;td&gt;20%&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Domain 5: Test, Validate, and Troubleshoot&lt;/td&gt;
      &lt;td&gt;%18&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Domain 6: Publishing, Operations, and Lifecycle Management&lt;/td&gt;
      &lt;td&gt;10%&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Total&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;100%&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Por otro lado también recomiendo:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Aprender muy bien el JSON de petición / respuesta&lt;/li&gt;
  &lt;li&gt;Entender cómo funciona el programa Beta tester&lt;/li&gt;
  &lt;li&gt;Aprender cómo persistir los datos en una sesión y entre sesiones&lt;/li&gt;
  &lt;li&gt;Aprender los distintos interaction models y que intents son proporcionados por omisión&lt;/li&gt;
  &lt;li&gt;Entender los Built-in intents estándar&lt;/li&gt;
  &lt;li&gt;Conocer los servicios backend de AWS que usa Alexa, como por ejemplo Lambda, DynamoDB, S3, etc&lt;/li&gt;
  &lt;li&gt;Conocer cómo dar permisos a funciones lambda&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;tip-extra&quot;&gt;Tip extra&lt;/h2&gt;

&lt;p&gt;Al ser una especialización muchas de las preguntas resultan largas y confusas, por lo que te recomiendo que cuando leas en la pregunta &lt;code class=&quot;highlighter-rouge&quot;&gt;Alexa Skill Builder&lt;/code&gt; lo reemplazases  en tu mente por &lt;code class=&quot;highlighter-rouge&quot;&gt;Developer&lt;/code&gt;, ya que suena muy raro cuando lees algo como  “An Alexa Skill Builder builds a skill…”&lt;/p&gt;

&lt;h2 id=&quot;recomendaciones-para-ganar-tiempo-en-el-examen&quot;&gt;Recomendaciones para ganar tiempo en el examen:&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;Las preguntas fáciles respóndelas rápidamente, no te quedes mucho tiempo pensando en si es la respuesta correcta porque seguro lo es.&lt;/li&gt;
  &lt;li&gt;Solo marcar las preguntas en las que realmente tienes dudas, así al momento de revisarlas puedes enfocarte en solo esas y si queda tiempo empezar a revisar el resto&lt;/li&gt;
  &lt;li&gt;Piensen que es una certificación de Amazon, en ese sentido siempre preguntarse cuál servicio de Amazon corresponde.&lt;/li&gt;
  &lt;li&gt;Descartar cosas que se pueden hacer a nivel de S.O. si un servicio de Amazon lo provee, y solo considerarlo cuando no hay mas opción.&lt;/li&gt;
  &lt;li&gt;Siempre que lean scalable piensen en SQS/DynamoDB, cost-saving = S3/S3 RRS, y así.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Si estás interesado en esta certificación te recomiendo algunos enlaces:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Cursos en línea&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://acloud.guru/learn/intro-alexa-free&quot; target=&quot;_blank&quot;&gt;Introduction to Alexa&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://acloud.guru/series/alexa-devs&quot; target=&quot;_blank&quot;&gt;Alexa Devs&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Documentación de AWS&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://aws.amazon.com/whitepapers/&quot; target=&quot;_blank&quot;&gt;Whitepapers&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://aws.amazon.com/documentation/&quot; target=&quot;_blank&quot;&gt;Documentation&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://aws.amazon.com/faqs/&quot; target=&quot;_blank&quot;&gt;FAQs&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>Luis Gallardo</name></author><category term="AWS" /><summary type="html"></summary></entry><entry><title type="html">Pyenv al rescate</title><link href="https://lgallardo.com/es/2019/02/26/pyenv-to-the-rescue" rel="alternate" type="text/html" title="Pyenv al rescate" /><published>2019-02-25T18:00:00-06:00</published><updated>2019-02-25T18:00:00-06:00</updated><id>https://lgallardo.com/es/2019/02/26/pyenv-to-the-rescue</id><content type="html" xml:base="https://lgallardo.com/es/2019/02/26/pyenv-to-the-rescue">&lt;center&gt;&lt;img src=&quot;/images/Python-logo-150.jpg&quot; alt=&quot;Python&quot; /&gt;&lt;/center&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h1 id=&quot;el-problema&quot;&gt;El problema&lt;/h1&gt;

&lt;p&gt;Hace poco cambié a &lt;em&gt;Debian testing&lt;/em&gt; nuevamente para entre otras cosas poder usar Python 3.6. Empecé a trabajar con esta versión, a crear mis Lambda Layers y todo bien hasta que &lt;em&gt;Debian testing&lt;/em&gt; cambió a Python 3.7. Bueno, me dije a mí mismo, no hay drama con &lt;code class=&quot;highlighter-rouge&quot;&gt;alternative&lt;/code&gt; puedo cambiar versiones de Python sin problemas o de última decirle a &lt;code class=&quot;highlighter-rouge&quot;&gt;virtualenv&lt;/code&gt; que use un intérprete u otro.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;:~# update-alternatives --config python
There are 3 choices for the alternative python (providing /usr/bin/python).

  Selection    Path                Priority   Status
------------------------------------------------------------
  0            /usr/bin/python3.6   3         auto mode
  1            /usr/bin/python2     1         manual mode
  2            /usr/bin/python3     2         manual mode
* 3            /usr/bin/python3.6   3         manual mode

Press &amp;lt;enter&amp;gt; to keep the current choice[*], or type selection number: 3

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Pero incluso usando &lt;code class=&quot;highlighter-rouge&quot;&gt;alternative&lt;/code&gt; o forzando el intérprete para usar Python 3.6 al parecer queda algo siempre apuntando a Python 3.7:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ virtualenv -p /usr/bin/python3.6 test
Running virtualenv with interpreter /usr/bin/python3.6
Traceback (most recent call last):
  File &quot;/home/lgallard/.local/lib/python3.7/site-packages/virtualenv.py&quot;, line 22, in &amp;lt;module&amp;gt;
    import distutils.spawn
ModuleNotFoundError: No module named 'distutils.spawn'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;h1 id=&quot;pyenv-al-rescate&quot;&gt;pyenv al rescate&lt;/h1&gt;

&lt;p&gt;Existe una manejador de versiones de Python llamado &lt;a href=&quot;https://github.com/pyenv/pyenv#choosing-the-python-version&quot; target=&quot;_blank&quot;&gt;pyenv&lt;/a&gt; el cual permite configurar el entorno a usar tanto local como de forma global.&lt;/p&gt;

&lt;p&gt;Por ejemplo, para instalar la versión de Python 3.6.8 basta con hacer:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pyenv install 3.6.8
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Podemos verificar las versiones de la siguiente manera:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ pyenv versions
  system
* 3.6.8 (set by /home/lgallard/.pyenv/version)

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Luego para usar la versión instalada con pyenv, basta con pasarle la ruta:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ virtualenv -p ~/.pyenv/versions/3.6.8/bin/python test
Running virtualenv with interpreter /home/lgallard/.pyenv/versions/3.6.8/bin/python
Using base prefix '/home/lgallard/.pyenv/versions/3.6.8'
New python executable in /home/lgallard/test/bin/python
Installing setuptools, pip, wheel...
done.

./test/bin/python --version
Python 3.6.8
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;De esta forma pude seguir usando la versión especifica de Python que necesitaba.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Referencias:&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/pyenv/pyenv#choosing-the-python-version&quot; target=&quot;_blank&quot;&gt;pyenv&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/23842713/using-python-3-in-virtualenv&quot; target=&quot;_blank&quot;&gt;Using Python 3 in virtualenv&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>Luis Gallardo</name></author><category term="Python" /><summary type="html"></summary></entry><entry><title type="html">Usando el ASK SDK de Alexa desde Lambda Layers</title><link href="https://lgallardo.com/es/2018/12/04/using-alexa-ask-from-lambda-layers" rel="alternate" type="text/html" title="Usando el ASK SDK de Alexa desde Lambda Layers" /><published>2018-12-03T18:00:00-06:00</published><updated>2018-12-03T18:00:00-06:00</updated><id>https://lgallardo.com/es/2018/12/04/using-alexa-ask-from-lambda-layers</id><content type="html" xml:base="https://lgallardo.com/es/2018/12/04/using-alexa-ask-from-lambda-layers">&lt;center&gt;&lt;img src=&quot;/images/alexa_lambda_layers.jpg&quot; alt=&quot;Alexa + lambda + Layers&quot; /&gt;&lt;/center&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h1 id=&quot;lambda-layers&quot;&gt;Lambda Layers&lt;/h1&gt;
&lt;p&gt;Recientemente se incorporó &lt;a href=&quot;https://docs.aws.amazon.com/lambda/latest/dg/configuration-layers.html&quot; target=&quot;_blank&quot;&gt;Lambda Layers&lt;/a&gt; en AWS, que básicamente permite compartir librerías y códigos entre funciones Lambda. Esto permite agilizar el desarrollo ya que ahora no es necesario empaquetar todas las librerías con la función Lambda, como hacíamos con el ASK de Alexa, sino que ahora estás librerías se pueden subir de forma independiente en Lambda Layers y usarlas directamente en nuestras funciones.&lt;/p&gt;

&lt;h1 id=&quot;ask-sdk-de-alexa&quot;&gt;ASK SDK de Alexa&lt;/h1&gt;
&lt;p&gt;Para preparar el ASK de Alexa para Lambda Layers podemos seguir los siguientes pasos:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;virtualenv python
source python/bin/activate
pip install ask-sdk
zip -r ask-sdk.zip python/lib/python3.6/site-packages/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Ahora puedes usar el ASK SDK de Alexa desde tus funciones lambda sin necesidad de subirlo en cade despliegue.&lt;/p&gt;

&lt;h1 id=&quot;subiendo-el-ask-sdk-a-lambda-layer&quot;&gt;Subiendo el ASK SDK a Lambda Layer&lt;/h1&gt;

&lt;p&gt;Lo primero que debemos hacer es crear el Lambda Layers desde la consola:&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;/images/create_layer.jpg&quot; alt=&quot;Create Layer&quot; /&gt;&lt;/center&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Luego completamos el formulario y seleccionamos el .zip que creamos para subirlo, y finalmente le indicamos el runtime con que es compatible.&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;/images/ask_sdk_lambda_layer.jpg&quot; alt=&quot;Add SDK&quot; /&gt;&lt;/center&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Una vez creada podremos ver la descripción y la versión:&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;/images/ask_sdk_lambda_layer2.jpg&quot; alt=&quot;Add SDK&quot; /&gt;&lt;/center&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h1 id=&quot;cómo-incluir-el-ask-sdk-desde-lambda-layers&quot;&gt;¿Cómo incluir el ASK SDK desde Lambda Layers?&lt;/h1&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Ve a tu función Lambda y justo debajo del nombre de tu función haz clic en &lt;strong&gt;&lt;em&gt;Layers&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Desde el apartado &lt;strong&gt;&lt;em&gt;Referenced layers&lt;/em&gt;&lt;/strong&gt; en la parte inferior, haz clic en el botón &lt;strong&gt;&lt;em&gt;Add a layer&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;center&gt;&lt;img src=&quot;/images/add_layer1.jpg&quot; alt=&quot;Add SDK&quot; /&gt;&lt;/center&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Selecciona el layer &lt;strong&gt;&lt;em&gt;ask-sdk&lt;/em&gt;&lt;/strong&gt; desde el menú desplegable, y haz clic en &lt;strong&gt;&lt;em&gt;Add&lt;/em&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;center&gt;&lt;img src=&quot;/images/add_layer2.jpg&quot; alt=&quot;Add SDK&quot; /&gt;&lt;/center&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Como puedes ver, el Lambda Layer con el ASK SDK de Alexa ya puede ser usado en esta función Lambda:&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;/images/add_layer3.jpg&quot; alt=&quot;Add SDK&quot; /&gt;&lt;/center&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Puedes seleccionar este mismo Layer para las otras funciones Lambda que usen el mismo ASK SDK y runtime sin tener que estar subiéndolo en cada despliegue.&lt;/p&gt;</content><author><name>Luis Gallardo</name></author><category term="AWS" /><category term="Alexa" /><category term="Lambda" /><category term="Layers" /><summary type="html"></summary></entry></feed>